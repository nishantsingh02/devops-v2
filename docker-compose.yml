name: Deploy the backend
on:
  push:
    branches: [ main ]
    jobs:
      build:
        runs-on: unbuntu-latest
        steps:
          - name: Checkout the code
            uses: actions/checkout@v2

          - name: Docker login
            uses: actions/login-action@v2 
            with:
              username: ${{ secret.DOCKERHUB_USERNAME }}
              password: ${{ secret.DOCKERHUB_TOKEN }}

          - name: Build and push
            user: docker/build-push-action@v4
            with:
              context:
              file: ./docker/Dockerfile.backend
              push: true
              tag: nishantsingh02/user-app-backend:${{ github.sha }}

